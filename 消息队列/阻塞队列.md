## 1 阻塞队列

当队列已满，往队列中添加元素的操作会被阻塞；

当队列为空，从队列中去除元素的操作会被阻塞。


![1589784121560](..\cache\img\1589784121560.png)

### 1.1 四组API

|     方法     | 抛出异常 | 有返回值、无异常 | 阻塞、等待 | 超时等待  |
| :----------: | :------: | :--------------: | :--------: | :-------: |
|     添加     |   add    |      offer       |    put     | offer(,,) |
|     移除     |  remove  |       poll       |    take    | poll(,,)  |
| 检测队首元素 | element  |       peek       |     -      |     -     |

```java
/**
 * 阻塞队列--抛出异常
 */
public static void test1() {
    ArrayBlockingQueue<Integer> queue = new ArrayBlockingQueue<>(3);
    System.out.println(queue.add(1));
    System.out.println(queue.add(2));
    System.out.println(queue.add(3));
    // System.out.println(queue.add(4));

    System.out.println("==========================");
    // System.out.println(queue.remove(3));
    System.out.println(queue.remove());
    System.out.println(queue.remove());
    System.out.println(queue.remove());
    System.out.println(queue.element());
    // System.out.println(queue.remove());
    // System.out.println(queue.remove());
}
```

```java
/**
 * 阻塞队列--返回false
 */
public static void test2() {
    ArrayBlockingQueue<Integer> queue = new ArrayBlockingQueue<>(3);
    System.out.println(queue.offer(1));
    System.out.println(queue.offer(2));
    System.out.println(queue.offer(3));
    // System.out.println(queue.offer(4)); // 返回false

    System.out.println("===============================");
    System.out.println(queue.poll());
    System.out.println(queue.poll());
    System.out.println(queue.poll());
    System.out.println(queue.peek());
    System.out.println(queue.poll());
}
```

```java
/**
 * 阻塞，等待
 *
 * @throws InterruptedException e
 */
public static void test3() throws InterruptedException {
    ArrayBlockingQueue<Integer> queue = new ArrayBlockingQueue<>(3);
    queue.put(1);
    queue.put(2);
    queue.put(3);
    // queue.put(4);

    System.out.println(queue.take());
    System.out.println(queue.take());
    System.out.println(queue.take());
    System.out.println(queue.take());
}
```

```java
/**
 * 阻塞，超时等待
 *
 * @throws InterruptedException e
 */
public static void test4() throws InterruptedException {
    ArrayBlockingQueue<Integer> queue = new ArrayBlockingQueue<>(3);
    System.out.println(queue.offer(1, 1, TimeUnit.SECONDS));
    System.out.println(queue.offer(2, 1, TimeUnit.SECONDS));
    System.out.println(queue.offer(3, 1, TimeUnit.SECONDS));
    System.out.println(queue.offer(4, 2, TimeUnit.SECONDS));

    System.out.println(queue.poll());
}
```